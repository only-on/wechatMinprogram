(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/find/luckyorder"],{3920:function(e,t,n){"use strict";var a=n("5bb9"),o=n.n(a);o.a},"3e85":function(e,t,n){"use strict";n.r(t);var a=n("ff87"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=o.a},"437b":function(e,t,n){"use strict";(function(e){n("c6bf"),n("921b");a(n("66fd"));var t=a(n("e98d"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"5bb9":function(e,t,n){},6881:function(e,t,n){"use strict";var a={"uni-number-box":function(){return n.e("components/uni-number-box/uni-number-box").then(n.bind(null,"8ae1"))}},o=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}))},e98d:function(e,t,n){"use strict";n.r(t);var a=n("6881"),o=n("3e85");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("3920");var c,i=n("f0c5"),u=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);t["default"]=u.exports},ff87:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n("4795"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,o,r,c){try{var i=e[r](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(a,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){c(r,a,o,i,u,"next",e)}function u(e){c(r,a,o,i,u,"throw",e)}i(void 0)}))}}var u=function(){n.e("components/uni-number-box/uni-number-box").then(function(){return resolve(n("8ae1"))}.bind(null,n)).catch(n.oe)};var s={components:{uniNumberBox:u},data:function(){return{orderidnumber:-1,raffleJournalId:0,note:"",numberValue:1,name:"",price:.1,prizeQuantity:200,url:"https://zzwl1zsxn.oss-cn-hangzhou.aliyuncs.com/images/2019/05/31/cccd2c3fab3eaa1071208a5ebae1190f.png",peopleQuantity:1e3,detail:'<p><img src="https://zzwl1zsxn.oss-cn-hangzhou.aliyuncs.com/product/b934449e-27f6-4b12-9ab5-a66615c8555f.jpg"><img src="https://zzwl1zsxn.oss-cn-hangzhou.aliyuncs.com/product/f9907dad-c18f-476e-bac9-c07a859ad7d7.jpg"></p>',raffleJournalStatus:1,isPrize:null,nowPeopleCount:594,originalPrice:90,commodityId:46,jindu:50,addressData:{name:"添加地址",mobile:null}}},onLoad:function(e){var t=this;return i(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t,a.raffleJournalId=e.id,a.loadData();case 3:case"end":return n.stop()}}),n)})))()},methods:{change:function(e){console.log(e),a.numberValue=1},loadData:function(){return i(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.request({url:a.$api_url+"/raffle/raffle_journal_detail_user",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:e.getStorageSync("authorization")},data:{raffleJournalId:a.raffleJournalId},success:function(e){if(console.log(e),1e3!=e.data.code)return!1;a.jindu=Math.floor(100*e.data.content.nowPeopleCount/e.data.content.peopleQuantity),a.name=e.data.content.name,a.price=e.data.content.price,a.prizeQuantity=e.data.content.prizeQuantity,a.url=e.data.content.url,a.peopleQuantity=e.data.content.peopleQuantity,a.detail=e.data.content.detail,a.raffleJournalStatus=e.data.content.raffleJournalStatus,a.isPrize=e.data.content.isPrize,a.nowPeopleCount=e.data.content.peopleQuantity-e.data.content.nowPeopleCount,a.originalPrice=e.data.content.originalPrice,a.commodityId=e.data.content.commodityId}});case 1:case"end":return t.stop()}}),t)})))()},selAddress:function(){var t=this;e.chooseAddress({success:function(e){t.addressData=e,console.log(e.userName),console.log(e.postalCode),console.log(e.provinceName),console.log(e.cityName),console.log(e.countyName),console.log(e.detailInfo),console.log(e.nationalCode),console.log(e.telNumber)}})},submit:function(){var t=this,n=this;null==n.addressData.telNumber?e.showToast({title:"请选择地址"}):-1!=n.orderidnumber?e.request({url:this.$api_url+"/weixin/payment.do",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:e.getStorageSync("authorization")},data:{orderId:res.data.content.id},success:function(t){console.log("success:"+JSON.stringify(t.data)),console.log("success:"+t.data.nonceStr),e.requestPayment({provider:"wxpay",timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:"MD5",paySign:t.data.paySign,success:function(t){console.log("success:"+JSON.stringify(t)),e.navigateBack({delta:2})},fail:function(e){console.log("fail:"+JSON.stringify(e))}})}}):e.request({url:n.$api_url+"/order/create",method:"POST",header:{authorization:e.getStorageSync("authorization")},data:{customer_id:e.getStorageSync("openid"),type:4,commodityItemVO:{commodityId:n.commodityId,quantity:n.numberValue},raffleJournalId:n.raffleJournalId,otherInfo:n.note,consignee:n.addressData.userName,phone:n.addressData.telNumber,address:n.addressData.provinceName+n.addressData.cityName+n.addressData.countyName+n.addressData.detailInfo},success:function(a){1e3==a.data.code?(n.orderidnumber=a.data.content.id,e.request({url:t.$api_url+"/weixin/payment.do",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:e.getStorageSync("authorization")},data:{orderId:a.data.content.id},success:function(t){console.log("success:"+JSON.stringify(t.data)),console.log("success:"+t.data.nonceStr),e.requestPayment({provider:"wxpay",timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:"MD5",paySign:t.data.paySign,success:function(t){console.log("success:"+JSON.stringify(t)),e.navigateBack({delta:2})},fail:function(e){console.log("fail:"+JSON.stringify(e))}})}})):e.showModal({title:"提示",content:""+a.data.message,showCancel:!1})}})}}};t.default=s}).call(this,n("543d")["default"])}},[["437b","common/runtime","common/vendor"]]]);