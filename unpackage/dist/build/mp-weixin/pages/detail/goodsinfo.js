(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/goodsinfo"],{"0d92":function(o,e,i){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("5662"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/simple-pro/customModal").then(function(){return resolve(i("ec76"))}.bind(null,i)).catch(i.oe)},c=function(){Promise.all([i.e("common/vendor"),i.e("components/gaoyia-parse/parse")]).then(function(){return resolve(i("c293"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/uni-section/uni-section").then(function(){return resolve(i("8a21"))}.bind(null,i)).catch(i.oe)},a=function(){i.e("components/uni-goods-nav/uni-goods-nav").then(function(){return resolve(i("420d"))}.bind(null,i)).catch(i.oe)},d={data:function(){return{numberValue:1,minQuantity:1,kucunshuliang:999,goid:0,itemss:"",show:!1,leixing:"件",shuzi:0,pickUp:!1,pickUpAddress:"",ispintuan:"售",id:"",type:0,loadGoods:!1,specClass:"none",miaosha:0,goods:[],goodsorder:[],shopCartBg:!1,scrollTop:!1,taocanqingdan:!1,good_type_name:"单品",navBarButton:!1,navsel:1,isCollect:0,secondKillId:0,secondKillTimeId:0,copyTklStatus:!1,ccsd:"<p></p>",guige_id:0,guige:"",guigePrice:"",options:[{icon:"home-filled",text:"回首页",color:"#ffa200"},{icon:"headphones",text:"客服",color:"#646566"},{icon:"starhalf",text:"去收藏",color:"#646566"}],buttonGroup:[{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}],specList:[{id:1,name:"规格"}],specChildList:[]}},components:{uniPopup:n,simpleModal:s,uParse:c,uniSection:l,uniGoodsNav:a},onShow:function(){this.copyTklStatus=!1},onLoad:function(e){if(t=this,e.id)this.id=e.id,this.type=e.type,1==e.miaosha&&(this.miaosha=e.miaosha,this.secondKillId=e.id,this.secondKillTimeId=e.type),console.log("id="+e.id),console.log("type="+e.type),console.log("miaosha="+e.miaosha),this.loadGoodsInfo();else{console.log(e),console.log(e.scene);var i=decodeURIComponent(e.scene).split("&");console.log(i);var n=i[0].split("=")[1],s=i[1].split("=")[1],c=i[2].split("=")[1];console.log("id="+n),console.log("type="+s),console.log("miaosha="+c),i&&n&&s?(this.id=n,this.type=s,1==c&&(this.miaosha=c,this.secondKillId=n,this.secondKillTimeId=s),this.loadGoodsInfo()):o.navigateBack()}},onPageScroll:function(o){o.scrollTop>200?this.scrollTop=!0:this.scrollTop=!1},onNavigationBarButtonTap:function(){this.navBarButton=!this.navBarButton},methods:{loadGoodsInfo:function(){var e=this;if(console.log(this.miaosha),1==this.miaosha)var i="second_kill/detail",n={id:this.id,secondKillTimeId:this.type},s=this.$Request.topost1(i,n);else i=this.$api.goods.goodsinfo,n={productId:this.id,type:this.type},s=this.$Request.toget1(i,n);s.then((function(i){if(console.log(i),1e3==i.code){if(e.goods=i.content,e.loadGoods=!0,e.ccsd=i.content.detail,e.isCollect=e.goods.isCollect,e.pickUp=e.goods.pickUp,e.pickUpAddress=e.goods.pickUpAddress,e.minQuantity=e.goods.commodityList[0].minQuantity,e.kucunshuliang=e.goods.stock,console.log("库存："+e.kucunshuliang),null!=e.goods.orders&&void 0!=e.goods.orders&&e.goods.orders!=[]&&e.goods.orders.length>0&&(e.shuzi=e.goods.orders.length),e.goods.type<=0?e.id=i.content.productId:e.id=i.content.id,console.log("价格",i.content.discountPrice+"this.goods.type"+e.goods.type+"this.miaosha"+e.miaosha),e.type=i.content.type,1==e.miaosha?e.guigePrice=i.content.discountPrice:0==e.goods.type?e.guigePrice=i.content.discountPrice:(e.guigePrice=i.content.returnValue,e.guigePrice=i.content.discountPrice),e.goods.orders.length>0){e.goods.orders.length%2!=0?(e.goodsorder=e.goodsorder.concat(e.goods.orders),e.goodsorder=e.goodsorder.concat(e.goods.orders)):e.goodsorder=e.goodsorder.concat(e.goods.orders);for(var n=e.goodsorder.length,s=2,c=n%s===0?n/s:Math.floor(n/s+1),l=[],a=0;a<c;a++){var d=e.goodsorder.slice(a*s,a*s+s);l.push(JSON.parse(JSON.stringify(d)))}console.log(l),e.goodsorder=l,console.log(e.goodsorder)}console.log("规格价格",e.guigePrice),1==e.goods.isCollect&&(t.options=[{icon:"home-filled",text:"回首页",color:"#ffa200"},{icon:"headphones",text:"客服",color:"#646566"},{icon:"star-filled",text:"已收藏",color:"#ffa200"}]),console.log("aaaaa",e.goods.type),e.buttonGroup=[{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}],0==e.goods.type?(e.good_type_name="周期购",e.ispintuan="售"):1==e.goods.type?(e.good_type_name="单品",e.ispintuan="售"):2==e.goods.type?(e.good_type_name="套餐",e.ispintuan="售"):-1==e.goods.type?(0==e.goods.minAskType?e.good_type_name=e.goods.minAsk+"人成团":e.good_type_name=e.goods.minAsk+"件成团",e.ispintuan="拼",e.taocanqingdan=!0,e.buttonGroup=[{text:"单独购买",backgroundColor:"#ffa200",color:"#fff"},{text:"开团",backgroundColor:"#ff0000",color:"#fff"}]):-2==e.goods.type?(e.good_type_name="套餐团购",e.ispintuan="拼",e.taocanqingdan=!0,e.buttonGroup=[{text:"单独购买",backgroundColor:"#ffa200",color:"#fff"},{text:"开团",backgroundColor:"#ff0000",color:"#fff"}]):-3==e.goods.type?(e.good_type_name="周期购团购",e.ispintuan="拼",e.taocanqingdan=!0,e.buttonGroup=[{text:"单独购买",backgroundColor:"#ffa200",color:"#fff"},{text:"开团",backgroundColor:"#ff0000",color:"#fff"}]):(e.ispintuan="售",e.good_type_name="单品"),0!=e.type&&e.goods.commodityList.forEach((function(o){if(1==e.miaosha)var i={id:o.id,name:o.name,groupBuyPrice:o.groupBuyPrice,imageUrl:o.imageUrl,price:o.secondKillPrice,pid:1};else i={id:o.id,name:o.name,groupBuyPrice:o.groupBuyPrice,imageUrl:o.imageUrl,price:o.price,pid:1};e.specChildList.push(i)}))}else o.navigateBack()}))},huishouye:function(){o.switchTab({url:"/pages/index/index"})},shoucang:function(){var e=this,i=o.getStorageSync("authorization");""!=i&&null!=i?0==this.isCollect?this.$Request.topost(this.$api.goods.collect_deal,{productId:this.id,collect:!0}).then((function(o){console.log(o),1e3==o.code&&(e.isCollect=1,e.options=[{icon:"home-filled",text:"回首页",color:"#ffa200"},{icon:"headphones",text:"客服",color:"#646566"},{icon:"star-filled",text:"已收藏",color:"#ffa200"}])})):this.$Request.topost(this.$api.goods.collect_deal,{productId:this.id,collect:!1}).then((function(o){console.log(o),1e3==o.code&&(e.isCollect=0,e.options=[{icon:"home-filled",text:"回首页",color:"#ffa200"},{icon:"headphones",text:"客服",color:"#646566"},{icon:"starhalf",text:"去收藏",color:"#646566"}])})):o.showModal({cancelText:"取消登录",confirmText:"立即登录",title:"提示",content:"是否确定授权登录？",success:function(e){e.confirm?o.navigateTo({url:"../myinfo/login"}):e.cancel&&console.log("用户点击取消")}})},onClick:function(e){console.log(e),o.showToast({title:"点击".concat(e.content.text),icon:"none"})},buttonClicktuan:function(o,e,i){this.itemss=i,this.goid=e,this.show=!0},cancel:function(o){this.show=!1},change:function(o){},change1:function(o){console.log(o),this.numberValue=o},guanbipop:function(){this.show=!1},onShareinfos:function(e,i,t){var n=this;this.show=!1;var s=o.getStorageSync("authorization");if(""!=s&&null!=s){if(0==this.type)return this.id=this.goods.productId,void o.navigateTo({url:"/pages/order/createOrder?id="+this.id+"&type="+this.type+"&guige_id=0&buy_type=0&miaosha="+this.miaosha+"&secondKillId="+this.secondKillId+"&secondKillTimeId="+this.secondKillTimeId+"&numberValue="+this.numberValue});this.specChildList=[],0!=this.type&&this.goods.commodityList.forEach((function(o){if(1==n.miaosha)var i={id:o.id,name:o.name,groupBuyPrice:o.groupBuyPrice,imageUrl:o.imageUrl,price:o.secondKillPrice,pid:1};else i={id:o.id,name:o.name,groupBuyPrice:o.groupBuyPrice,imageUrl:o.imageUrl,price:o.price,pid:1};1==e&&void 0==i.groupBuyPrice||n.specChildList.push(i)})),this.toggleSpec(1),this.navsel=this.goid+100}else o.showModal({cancelText:"取消登录",confirmText:"立即登录",title:"提示",content:"是否确定授权登录？",success:function(e){e.confirm?o.navigateTo({url:"../myinfo/login"}):e.cancel&&console.log("用户点击取消")}})},buttonClick:function(e){var i=this,t=o.getStorageSync("authorization");if(""!=t&&null!=t){if(0==this.type)return this.id=this.goods.productId,void o.navigateTo({url:"/pages/order/createOrder?id="+this.id+"&type="+this.type+"&guige_id=0&buy_type=0&miaosha="+this.miaosha+"&secondKillId="+this.secondKillId+"&secondKillTimeId="+this.secondKillTimeId+"&numberValue="+this.numberValue});console.log(e),this.specChildList=[],0!=this.type&&this.goods.commodityList.forEach((function(o){if(1==i.miaosha)var t={id:o.id,name:o.name,groupBuyPrice:o.groupBuyPrice,imageUrl:o.imageUrl,price:o.secondKillPrice,pid:1};else t={id:o.id,name:o.name,groupBuyPrice:o.groupBuyPrice,imageUrl:o.imageUrl,price:o.price,pid:1};1==e.index&&void 0==t.groupBuyPrice||i.specChildList.push(t)})),console.log(this.specChildList),this.toggleSpec(e.index),this.navsel=e.index}else o.showModal({cancelText:"取消登录",confirmText:"立即登录",title:"提示",content:"是否确定授权登录？",success:function(e){e.confirm?o.navigateTo({url:"../myinfo/login"}):e.cancel&&console.log("用户点击取消")}})},youhuiquan:function(){var e=o.getStorageSync("authorization");""!=e&&null!=e?(console.log("yhq"),o.navigateTo({url:"/pages/category/lingyhq?productId="+this.id})):o.showModal({cancelText:"取消登录",confirmText:"立即登录",title:"提示",content:"是否确定授权登录？",success:function(e){e.confirm?o.navigateTo({url:"../myinfo/login"}):e.cancel&&console.log("用户点击取消")}})},preview:function(o,e){console.log(o)},navigate:function(o,e){console.log(o)},moveHandleStop:function(){console.log("111")},showShopCartBg:function(o){"cart"==o&&(this.shopCartBg=!this.shopCartBg),"nav"==o&&(this.navBarButton=!this.navBarButton)},topScrollTap:function(){o.pageScrollTo({scrollTop:0,duration:300})},navBarButtontO:function(o){console.log(o)},shopCartShare:function(o){"tkl"==o?(this.showShopCartBg("cart"),this.copyTklStatus=!1,this.$refs.simpleModalTkl.show({showConfirmButton:!1})):"tklbuy"==o&&(this.copyTklStatus=!1,this.$refs.simpleModalTklBuy.show({showConfirmButton:!1}))},selectSpec:function(o,e){var i=this,t=this.specChildList;console.log("选择规格"),t.forEach((function(o){o.pid===e&&i.$set(o,"selected",!1)})),this.$set(t[o],"selected",!0),console.log(t[o]),this.specSelected=[],t.forEach((function(e){!0===e.selected&&(i.guige_id=o,i.specSelected.push(e))})),this.guige=this.specSelected[0].name,0==this.navsel?this.guigePrice=this.specSelected[0].price:this.guigePrice=this.specSelected[0].groupBuyPrice,console.log(this.specSelected[0])},toggleSpecOk:function(){var e=o.getStorageSync("authorization");if(""!=e&&null!=e){0==this.type&&(this.id=this.goods.productId);var i=this.guige_id,t=this.guige,n=this.goods.commodityList[0].minQuantity;console.log(i+"-------"+t+"------"+n),this.toggleSpec(0),o.navigateTo({url:"/pages/order/createOrder?id="+this.id+"&type="+this.type+"&guige_id="+this.guige_id+"&buy_type="+this.navsel+"&miaosha="+this.miaosha+"&secondKillId="+this.secondKillId+"&secondKillTimeId="+this.secondKillTimeId+"&numberValue="+this.numberValue})}else o.showModal({cancelText:"取消登录",confirmText:"立即登录",title:"提示",content:"是否确定授权登录？",success:function(e){e.confirm?o.navigateTo({url:"../myinfo/login"}):e.cancel&&console.log("用户点击取消")}})},toggleSpec:function(o){var e=this;if(console.log(o),"show"===this.specClass)this.specClass="hide",setTimeout((function(){e.specClass="none"}),250);else if("none"===this.specClass||"hide"===this.specClass){this.specClass="show";var i=this.specChildList;i.forEach((function(o){e.$set(o,"selected",!1)})),this.$set(i[0],"selected",!0),console.log(i[0]),this.specSelected=[],i.forEach((function(o){!0===o.selected&&(e.guige_id=0,e.specSelected.push(o))})),this.guige=this.specSelected[0].name,this.guigePrice=0==o?this.specSelected[0].price:this.specSelected[0].groupBuyPrice}},stopPrevent:function(){},TklmaskClose:function(o){this.$refs.simpleModalTkl.hide(),this.copyTklStatus=!1},copyTklWenAn:function(){var e=this;o.setClipboardData({data:"复制内容测试！",success:function(o){e.copyTklStatus=!0}})},TklBuymaskClose:function(){this.$refs.simpleModalTklBuy.hide(),this.copyTklStatus=!1},onShareinfo:function(e){var i=this,t=o.getStorageSync("authorization");""!=t&&null!=t?(o.showLoading({title:"数据生成中..."}),o.request({url:this.$api_url+"/user/createPoster",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:o.getStorageSync("authorization")},data:{productId:1==this.miaosha?"":""+this.id,type:1==this.miaosha?"":""+this.type,secondKillId:1==this.miaosha?""+this.secondKillId:"",secondKillTimeId:1==this.miaosha?""+this.secondKillTimeId:"",path:"pages/detail/goodsinfo?id="+this.id+"&type="+this.type+"&miaosha="+this.miaosha},success:function(e){if(console.log(e),1e3==e.data.code){var t=e.data.content,n=1==i.miaosha?""+i.secondKillId:""+i.id,s=1==i.miaosha?""+i.secondKillTimeId:""+i.type;console.log("+++"+n),console.log("+++"+s),o.navigateTo({url:"/pages/videoshare/new_file?imgurl="+t+"&shareimg="+i.goods.imageUrls[0].url+"&sharebiaoti="+i.goods.title+"(抢购价：￥"+i.guigePrice+")&id="+n+"&type="+s+"&miaosha="+i.miaosha})}},complete:function(e){o.hideLoading()}})):o.showModal({cancelText:"取消登录",confirmText:"立即登录",title:"提示",content:"是否确定授权登录？",success:function(e){e.confirm?o.navigateTo({url:"../myinfo/login"}):e.cancel&&console.log("用户点击取消")}})}}};e.default=d}).call(this,i("543d")["default"])},3393:function(o,e,i){"use strict";var t=i("a41c"),n=i.n(t);n.a},"3eeb":function(o,e,i){"use strict";i.r(e);var t=i("0d92"),n=i.n(t);for(var s in t)"default"!==s&&function(o){i.d(e,o,(function(){return t[o]}))}(s);e["default"]=n.a},"75e5":function(o,e,i){"use strict";i.r(e);var t=i("ba06"),n=i("3eeb");for(var s in n)"default"!==s&&function(o){i.d(e,o,(function(){return n[o]}))}(s);i("c98c"),i("3393");var c,l=i("f0c5"),a=Object(l["a"])(n["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],c);e["default"]=a.exports},a41c:function(o,e,i){},ba06:function(o,e,i){"use strict";var t={"uni-goods-nav":function(){return i.e("components/uni-goods-nav/uni-goods-nav").then(i.bind(null,"420d"))},"uni-number-box":function(){return i.e("components/uni-number-box/uni-number-box").then(i.bind(null,"8ae1"))},"uni-popup":function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"5662"))}},n=function(){var o=this,e=o.$createElement;o._self._c},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return t}))},c98c:function(o,e,i){"use strict";var t=i("cf9f"),n=i.n(t);n.a},cf9f:function(o,e,i){},e745:function(o,e,i){"use strict";(function(o){i("c6bf"),i("921b");t(i("66fd"));var e=t(i("75e5"));function t(o){return o&&o.__esModule?o:{default:o}}o(e.default)}).call(this,i("543d")["createPage"])}},[["e745","common/runtime","common/vendor"]]]);