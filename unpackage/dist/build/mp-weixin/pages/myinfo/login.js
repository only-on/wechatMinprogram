(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myinfo/login"],{"00dd":function(n,e,t){"use strict";var a=t("a592"),o=t.n(a);o.a},"0fa3":function(n,e,t){"use strict";var a,o=function(){var n=this,e=n.$createElement;n._self._c},c=[];t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return c})),t.d(e,"a",(function(){return a}))},3739:function(n,e,t){"use strict";t.r(e);var a=t("bdfe"),o=t.n(a);for(var c in a)"default"!==c&&function(n){t.d(e,n,(function(){return a[n]}))}(c);e["default"]=o.a},"4a0d":function(n,e,t){"use strict";(function(n){t("c6bf"),t("921b");a(t("66fd"));var e=a(t("d6d1"));function a(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},a592:function(n,e,t){},bdfe:function(n,e,t){"use strict";(function(n){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{appname:"甄田",appimage:"",code:"",encryptedData:"",iv:"",appId:""}},onLoad:function(e){t=this;var a=n.getAccountInfoSync(),o=a.miniProgram.appId;n.request({url:t.$api_url+"/user/storeNameNoAuth",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{appId:o},success:function(n){console.log(n),1e3==n.data.code&&(t.appname=n.data.content.storeName,t.appimage=n.data.content.image)}})},onShow:function(e){var a=n.getStorageSync("authorization");""==a||null==a?t.diaoyong():setTimeout((function(){n.switchTab({url:"../index/index"})}),1e3),console.log("获取token="+n.getStorageSync("authorization"))},methods:{guanbi:function(){n.navigateBack({delta:1})},diaoyong:function(){var e=n.getAccountInfoSync();t.appId=e.miniProgram.appId,n.getProvider({service:"oauth",success:function(e){n.login({provider:"weixin",success:function(n){console.log(n),t.code=n.code}})}})},gogetphonenumber:function(e){t.encryptedData=JSON.stringify(e.detail.encryptedData),t.iv=JSON.stringify(e.detail.iv),console.log("appId = "+t.appId),console.log("code = "+t.code),console.log("encryptedData = "+t.encryptedData),console.log("iv = "+t.iv),void 0!=t.iv&&void 0!=t.encryptedData?n.request({url:t.$api_url+"/user/login/weixinMini",method:"POST",data:{appId:t.appId,code:t.code,encryptedData:t.encryptedData,iv:t.iv},success:function(t){if(console.log(t),1e3==t.data.code){var a=t.data.content.phone,o=t.data.content.token;t.data.content.userId;try{n.setStorageSync("authorization",o),n.setStorageSync("phone",a),n.navigateBack({delta:1})}catch(e){}}},fail:function(e){console.log(e),n.hideLoading()}}):t.diaoyong()}}};e.default=a}).call(this,t("543d")["default"])},d6d1:function(n,e,t){"use strict";t.r(e);var a=t("0fa3"),o=t("3739");for(var c in o)"default"!==c&&function(n){t.d(e,n,(function(){return o[n]}))}(c);t("00dd");var i,d=t("f0c5"),r=Object(d["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=r.exports}},[["4a0d","common/runtime","common/vendor"]]]);