(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myinfo/systemmessage"],{"0020":function(t,e,n){"use strict";n.r(e);var o=n("b9be"),a=n("deef");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("16cb");var s,c=n("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);e["default"]=u.exports},"16cb":function(t,e,n){"use strict";var o=n("cd4c"),a=n.n(o);a.a},"8f18":function(t,e,n){"use strict";(function(t){n("c6bf"),n("921b");o(n("66fd"));var e=o(n("0020"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},acff:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a=null,i=function(){n.e("components/xw-empty/xw-empty").then(function(){return resolve(n("bcd9"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/uni-segmented-control/uni-segmented-control").then(function(){return resolve(n("6d6d"))}.bind(null,n)).catch(n.oe)},c={components:{uniSegmentedControl:s,xwEmpty:i},data:function(){return{isShow:!1,tu1:"https://zzwl1zsxn.oss-cn-hangzhou.aliyuncs.com/images/2020/03/28/33dcae809595b378bb5e42177df02aba.png",tu2:"https://zzwl1zsxn.oss-cn-hangzhou.aliyuncs.com/images/2020/03/28/720bb60bb28f04ac20f6cba3eacae394.png",status:"more",page:1,contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多了"},items:["系统","聊天","评论","@我的"],current:0,activeColor:"#65c186",styleType:"text",lists:[],liststate:[]}},onLoad:function(){o=this},onPullDownRefresh:function(){},onReachBottom:function(){null!=a&&clearTimeout(a),a=setTimeout((function(){o.getmorenews()}),100)},methods:{getmorenews:function(){o.status="loading",console.log("page="+o.page),t.showNavigationBarLoading(),t.request({url:o.$api_url+"/notify/list",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:t.getStorageSync("authorization")},data:{pageNum:o.page,pageSize:10,type:1},success:function(e){if(console.log(e.data),1e3!=e.data.code)return t.hideNavigationBarLoading(),o.status="noMore",!1;o.page=o.page+1;for(var n=0;n<e.data.content.length;n++){var a={id:1616,msgId:272186288,node:"html_web",title:"西安市气象台3月20日16时35分发布寒潮蓝色预警信号。",subtitle:"西安市气象台3月20日16时35分发布寒潮蓝色预警信号。",ext:{url:"http://3g.163.com/news/article/EANVHA9900018AP2.html"},createTime:"2019-03-21 08:54:08",url:"",isRead:0};a.id=e.data.content[n].id,a.msgId=e.data.content[n].msgId,a.node=e.data.content[n].node,a.title=e.data.content[n].title,a.subtitle=e.data.content[n].subtitle,"html_web"==e.data.content[n].node?a.ext.url=e.data.content[n].ext.url:a.ext.url="none",0==e.data.content[n].isRead?a.url=o.tu1:a.url=o.tu2,a.createTime=e.data.content[n].createTime,a.isRead=e.data.content[n].isRead,o.lists=o.lists.concat(a)}o.liststate=o.lists,o.status="more",t.hideNavigationBarLoading()}})},getnewsList:function(){o.page=1,o.status="loading",t.showNavigationBarLoading(),t.request({url:o.$api_url+"/notify/list",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:t.getStorageSync("authorization")},data:{pageNum:1,pageSize:10,type:1},success:function(e){if(console.log(e),1e3!=e.data.code)return t.hideNavigationBarLoading(),o.status="noMore",!1;o.page=o.page+1,o.lists=[];for(var n=0;n<e.data.content.length;n++){var a={id:1616,msgId:272186288,node:"html_web",title:"西安市气象台3月20日16时35分发布寒潮蓝色预警信号。",subtitle:"西安市气象台3月20日16时35分发布寒潮蓝色预警信号。",ext:{url:"http://3g.163.com/news/article/EANVHA9900018AP2.html"},createTime:"2019-03-21 08:54:08",url:"",isRead:0};a.id=e.data.content[n].id,a.msgId=e.data.content[n].msgId,a.node=e.data.content[n].node,a.title=e.data.content[n].title,a.subtitle=e.data.content[n].subtitle,"html_web"==e.data.content[n].node?a.ext.url=e.data.content[n].ext.url:a.ext.url="none",0==e.data.content[n].isRead?a.url=o.tu1:a.url=o.tu2,a.createTime=e.data.content[n].createTime,a.isRead=e.data.content[n].isRead,o.lists=o.lists.concat(a)}o.liststate=o.lists,t.hideNavigationBarLoading(),t.stopPullDownRefresh(),o.lists.length<10?o.status="noMore":o.status="more",o.liststate.length<1&&(o.isShow=!0)}})},onClickItem:function(t){o.current!==t&&(o.current=t,0===o.current?(o.liststate=o.lists,o.isShow=!0):(o.liststate=[],o.isShow=!0))},logoTime:function(e){console.log("长按"),t.showActionSheet({itemList:["标记全部消息为已读","标记为已读","删除消息"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮"),1==t.tapIndex+1&&o.oneyidu(e),2==t.tapIndex+1&&o.allyidu(),3==t.tapIndex+1&&o.shanchu(e)},fail:function(t){console.log(t.errMsg)}})},yuedu:function(e){"html_web"==o.liststate[e].node&&(console.log(o.liststate[e].ext.url),t.navigateTo({url:"./openmessage?url="+o.liststate[e].ext.url})),0==o.liststate[e].isRead&&o.oneyidu(e)},oneyidu:function(e){t.request({url:o.$api_url+"/notify/readMessage",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:t.getStorageSync("authorization")},data:{id:o.liststate[e].id},success:function(t){console.log(t),1e3==t.data.code&&(o.liststate[e].isRead=1,o.liststate[e].url=o.tu2)}})},allyidu:function(){t.request({url:o.$api_url+"/notify/readAllMessage",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:t.getStorageSync("authorization")},data:{type:1},success:function(t){if(console.log(t),1e3==t.data.code)for(var e=0;e<o.liststate.length;e++)o.liststate[e].isRead=1,o.liststate[e].url=o.tu2}})},shanchu:function(e){t.request({url:o.$api_url+"/notify/delete",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",authorization:t.getStorageSync("authorization")},data:{id:o.liststate[e].id},success:function(t){console.log(t),1e3==t.data.code&&o.liststate.splice(e,1)}})}}};e.default=c}).call(this,n("543d")["default"])},b9be:function(t,e,n){"use strict";var o={"uni-segmented-control":function(){return n.e("components/uni-segmented-control/uni-segmented-control").then(n.bind(null,"6d6d"))},"xw-empty":function(){return n.e("components/xw-empty/xw-empty").then(n.bind(null,"bcd9"))}},a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},cd4c:function(t,e,n){},deef:function(t,e,n){"use strict";n.r(e);var o=n("acff"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a}},[["8f18","common/runtime","common/vendor"]]]);